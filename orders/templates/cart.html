{% extends 'base.html' %}
{% block content %}
<h3>Your Cart</h3>
<form method="post">
  {% csrf_token %}
  <table class="table align-middle">
    <thead><tr><th>Item</th><th>Price</th><th>Qty</th><th>Total</th></tr></thead>
    <tbody>
    {% for row in items %}
      <tr>
        <td>{{ row.item.name }}</td>
        <td>PKR {{ row.item.price }}</td>
        <td style="max-width:120px;">
          <input type="number" min="0" class="form-control" name="qty_{{ row.item.id }}" value="{{ row.qty }}">
        </td>
        <td>PKR {{ row.line_total }}</td>
      </tr>
    {% endfor %}
    </tbody>
    <tfoot>
      <tr><th colspan="3" class="text-end">Grand Total:</th><th>PKR {{ total }}</th></tr>
    </tfoot>
  </table>
  <div class="d-flex gap-2">
    <button name="update" class="btn btn-primary">Update Cart</button>
    <button name="clear" class="btn btn-outline-danger">Clear</button>
    <a class="btn btn-success ms-auto {% if not items %}disabled{% endif %}" href="{% url 'checkout' %}">Checkout</a>
  </div>
</form>
{% endblock %}